<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ex</title>
    <link rel="stylesheet" type="text/css" href="/note/css/common.css" />
    <link rel="stylesheet" type="text/css" href="/note/css/ex.css" />
</head>

<body>
    <div class="header">
        <header>
            <h1>
                <a href="">
                    <img src="/note/css/img/menu_icon.png" alt="logo" />
                    <span class="skip">연습페이지</span>
                </a>
            </h1>
            <div class="gnb depth1">
                <ul class="clearfix depth1_list">
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴1</span></a>
                        <div class="depth2">
                            <ul class="clearfix depth2_list">
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴1-1</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴1-2</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴1-3</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴1-4</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴2</span></a>
                        <div class="depth2">
                            <ul class="clearfix depth2_list">
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-1</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-2</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-3</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-4</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-5</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-6</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-7</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-8</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴2-9</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴3</span></a>
                        <div class="depth2">
                            <ul class="clearfix depth2_list">
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-1</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-2</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-3</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-4</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-5</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-6</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴3-7</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴4</span></a>
                        <div class="depth2">
                            <ul class="clearfix depth2_list">
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴4-1</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴4-2</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴4-3</span></a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴5</span></a>
                        <div class="depth2">
                            <ul class="clearfix depth2_list">
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴5-1</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴5-2</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴5-3</span></a></li>
                                <li class="depth2_item"><a class="depth2_text" href=""><span>메뉴5-4</span></a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </header>
    </div>
    <div></div>
    <div class="container">
        <div class="side">
            <div class="side_title">
                <div class="wrapbox">
                    <p class="title">사이드메뉴</p>
                </div>
            </div>
            <div class="side_menu">
                <ul class="depth1_list clearfix">
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴1</span></a>
                        <div class="depth2">
                            <ul class="depth2_list clearfix">
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴1-1</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴1-2</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴1-3</span></a>
                                    <div class="depth3">
                                        <ul class="depth3_list clearfix">
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴1-3-1</a></span>
                                            </li>
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴1-3-2</a></span>
                                            </li>
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴1-3-3</a></span>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴1-4</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴2</span></a>
                        <div class="depth2">
                            <ul class="depth2_list clearfix">
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴2-1</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴2-2</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴2-3</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴2-4</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴2-5</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴3</span></a>
                        <div class="depth2">
                            <ul class="depth2_list clearfix">
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴3-1</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴3-2</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴3-3</span></a>
                                    <div class="depth3">
                                        <ul class="depth3_list clearfix">
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴3-3-1</a></span>
                                            </li>
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴3-3-2</a></span>
                                            </li>
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴3-3-3</a></span>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴3-4</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴3-5</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴4</span></a>
                        <div class="depth2">
                            <ul class="depth2_list clearfix">
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴4-1</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴4-2</span></a>
                                </li>
                                <li class="depth2_item">
                                    <a class="depth2_text" href=""><span>메뉴4-3</span></a>
                                    <div class="depth3">
                                        <ul class="depth3_list clearfix">
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴4-3-1</a></span>
                                            </li>
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴4-3-2</a></span>
                                            </li>
                                            <li class="depth3_item">
                                                <span><a class="depth3_text" href="">메뉴4-3-3</a></span>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="depth1_item">
                        <a class="depth1_text" href=""><span>메뉴5 단독</span></a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="contents" class="cts@@{key}">
            <script>
                if (location.search != '') {
                    function getParameterByName(name) {
                        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)")
                        results = regex.exec(location.search);
                        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                    }
                    var menukey = getParameterByName('key');
                    var contents = document.getElementById('contents');
                    contents.className = 'page' + menukey;
                    var url = location.href.replace('site/ex/ex.html?key=', 'contents/') + '.html';
                    // fetch(url)
                    //     .then(res=>res.text())
                    //     .then(resp=>{
                    //         var content = new DOMParser().parseFromString(resp,"text/html").body.querySelector('div');
                    //         console.log(content);
                    //         contents.appendChild(content);
                    //         var js = document.createElement('script');
                    //         js.src = '/note/js/ex.js';
                    //         document.body.appendChild(js);
                    //         contents.querySelector('script').remove();
                    //     })

                    // async function fetchHtmlAsText(url) {
                    //     return await (await fetch(url)).text();
                    // }
                    // async function importPage(target) {
                    //     document.getElementById(target).innerHTML = await fetchHtmlAsText(url);
                    //     var js = document.createElement('script');
                    //     js.src = '/note/js/ex.js';
                    //     document.body.appendChild(js);
                    // }
                    // importPage('contents')

                    async function fetchHtmlAsText(url) {
                        return await (await fetch(url)).text();
                    }
                    async function importPage(target) {
                        var content = new DOMParser().parseFromString(await fetchHtmlAsText(url),"text/html").body.querySelector('div');
                        contents.append(content);
                        if(content.querySelector('script')){
                            let script = content.querySelectorAll('script');
                            script.forEach(function(v,n){
                                let js = document.createElement('script');
                                js.src = v.src;
                                contents.append(js);
                            })
                        }
                    }
                    importPage(contents);
                    document.querySelectorAll('#contents > div > script').forEach(function(v){v.remove();});
                    document.querySelector('#contents > script').remove();
                    
                    // var xhr = new XMLHttpRequest();
                    // xhr.open('get', '/note/contents/' + menukey + '.html', true)
                    // xhr.send();
                    // xhr.onload = () => {
                        //     document.getElementById('contents').className = 'page' + menukey;
                        //     console.log(xhr.response);
                        //     document.getElementById('contents').innerHTML = xhr.response;
                    // }
                }
            </script>
        </div>
    </div>
    <!-- <script src="/note/js/ex.js"></script> -->
</body>

</html>